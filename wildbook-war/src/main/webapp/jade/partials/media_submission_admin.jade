div
    div(ng-show="!data.submission")
        h1 Media Submissions
        .ag-fresh(ag-grid="msGridOptions", style="height: 590px")

    div.ng-cloak(ng-show="data.submission", wb-key-handler-form)
        .container-fluid
            .row
                .col-md-12
                    .row
                        .col-md-8.col-sm-6
                            h3 Edit Media Submission [{{data.submission.id}}]
                        .col-md-4.col-sm-6
                            .action-icon-box
                                button.btn.btn-danger.action-icon(ng-click="deleteSubmission(data.submission)")
                                    i.glyphicon.glyphicon-trash
                                button.btn.btn-success.action-icon(ng-click="doneEditing()")
                                    i.glyphicon.glyphicon-check
            .row
                .col-md-2
                    div.media-admin-nav
                        span Surveys
                        a(href="javascript:;" ng-click="searchSurvey()" tooltip-placement="right" uib-tooltip="Search for a Survey")
                            i.glyphicon.glyphicon-search
                        a(href="javascript:;", ng-click="addSurvey()"
                          uib-tooltip="Add a new Survey")
                            i.glyphicon.glyphicon-plus
                        ul.list-group
                            li.list-group-item.media-admin-nav(ng-repeat="surveyEnc in data.surveyEncs"
                                                               ng-click="selectSurvey(surveyEnc)"
                                                               ng-class="{active: surveyEnc.surveypart.part.surveyPartId === data.activeSurveyEnc.surveypart.part.surveyPartId}")
                                span {{surveyEnc.surveypart.survey.organization.displayName}} - {{surveyEnc.surveypart.survey.surveyNumber}}
                                a(href="javascript:;", ng-click="addEncounter(surveyEnc)" tooltip-placement="right" uib-tooltip="Add a new Encounter")
                                    i.glyphicon.glyphicon-plus
                                .list-group
                                    a.list-group-item(href="javascript:;" ng-repeat="encounter in surveyEnc.encounters" ng-click="selectEncounter($event, encounter, surveyEnc)" ng-class="{active: encounter.id === data.activeEncounter.id}")
                                        .encounter-item
                                            div {{encounter.individual.displayName}}
                                            div {{dateStringFromRest(encounter.encDate)}}
                                            div {{encounter.location.locationid}}
                    div.media-admin-nav
                        span Encounters
                        a(href="javascript:;" ng-click="searchEncounter()"
                          tooltip-placement="bottom" uib-tooltip="Search for an Encounter")
                            i.glyphicon.glyphicon-search
                        a(href="javascript:;" ng-click="addEncounter()"
                          tooltip-placement="bottom" uib-tooltip="Add a new Encounter")
                            i.glyphicon.glyphicon-plus
                        .list-group
                            a.list-group-item(href="javascript:;", ng-repeat="encounter in data.encounters", ng-click="selectEncounter($event, encounter)", ng-class="{active: encounter.id === data.activeEncounter.id}")
                                .encounter-item
                                    div {{encounter.individual.displayName}}
                                    div {{dateStringFromRest(encounter.encDate)}}
                                    div {{encounter.location.locationid}}
                .col-md-10
                    .container-fluid
                        .row
                            .col-md-12
                                span.text-primary Submitted by:
                                | &nbsp{{data.submission.user.displayName}}
                                span.text-primary &nbspon:
                                | &nbsp{{timeToDate(data.submission.timeSubmitted)}}
                        .row
                            .col-md-6
                                span {{data.submission.description}}
                            .col-md-6
                                span {{data.submission.verbatimLocation}}
                        .row
                            .col-md-12
                                wb-thumb-box(ng-if="data.submission"
                                             photos="data.photos"
                                             actions="data.tbActions"
                                             cb-action="performAction(code, photos)"
                                             num-photos="18")
                        .row
                            .col-md-12
                                wb-survey-search(ng-if="data.module.surveySearch", search-survey-done="searchSurveyDone(surveypart)")
                                wb-survey-edit(ng-if="data.module.surveyEdit", survey-to-edit="data.module.surveyEdit", edit-survey-done="editSurveyDone(surveypart)")
                                wb-encounter-search(ng-if="data.module.encounterSearch", search-encounter-done="searchEncounterDone(encounter)")
                                wb-encounter-edit(ng-if="data.module.encounterEdit", encounter-to-edit="data.module.encounterEdit", edit-encounter-done="editEncounterDone(encounter)")
